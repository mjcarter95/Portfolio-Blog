---
export interface Props {
  title: string;
  subtitle?: string;
  backgroundImage: string;
  date?: Date;
  readTime?: number;
  tags?: string[];
}

import { slugifyTag } from "@/utils/tags";
const { title, subtitle, backgroundImage, date, readTime, tags } = Astro.props;
---

<section
  class="w-full bg-cover bg-center bg-no-repeat text-white"
  style={`background-image: url('${backgroundImage}');`}
>
  <div class="bg-black/50">
    <div class="max-w-6xl mx-auto px-6 py-20 text-left flex flex-col justify-end h-[38vh] min-h-[260px] max-h-[460px]">
      <h1 class="text-4xl font-bold mb-2">{title}</h1>
      {subtitle && <p class="text-white/90">{subtitle}</p>}

      {(date || readTime || (tags && tags.length > 0)) && (
        <div class="mt-6 flex flex-wrap items-center gap-3 text-sm text-white/90">
          {date && (
            <time datetime={date.toISOString()}>
              {date.toLocaleDateString("en-GB", {
                year: "numeric",
                month: "long",
                day: "2-digit",
              })}
            </time>
          )}
          {readTime && <span>· {readTime} min read</span>}

          {tags?.length > 0 && (
            <>
              <span aria-hidden="true">·</span>
              <ul class="flex gap-2 flex-wrap">
                {tags.slice(0, 3).map((tag) => (
                  <li>
                    <a
                      href={`/tags/${slugifyTag(tag)}/`}
                      class="px-2 py-0.5 rounded bg-white/20 text-white hover:bg-white/30 transition"
                    >
                      {tag}
                    </a>
                  </li>
                ))}
              </ul>
            </>
          )}
        </div>
      )}
    </div>
  </div>
</section>
